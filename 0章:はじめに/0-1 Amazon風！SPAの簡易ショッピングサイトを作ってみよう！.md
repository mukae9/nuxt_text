# Amazon風！SPAの簡易ショッピングサイトを作ってみよう！

## SPA(シングルアプリケーション)って何だろう？
 最近SPAで構築されたWEBサービスをよく見かけるようになってきました。「GoogleMap」や「Facebook」「Trello」などページの読み込みを感じさせずに高速に遷移するこれらのサービスは近代チックでとても魅力的に映ります。
実装するのはとても難しいのでは？と思う方もいらっしゃるかと思いますが、PHPフレームワークで人気のLaravelと、JavascriptのフレームワークのVue.jsのフレームワークのNuxt.jsを使うことで比較的簡単に実装が可能です。
今、誤字かと思い文章を二回読んだ方もいるかと思いますが、Nuxt.jsはjavascriptでの人気のフレームワークVue.jsをさらに使いやすくするために存在するフレームワークで誤字ではありません。「え、つまりVue.jsに加えて学習コストがさらにかかるのか、、、」とテンションが下がった方もいらっしゃるかと思いますが、そうではありません。あくまでVue.jsを基本として使用しつつ煩わしい部分をNuxt.jsが最初から提供してくれるイメージなので、今回のSPAサイトの制作については学習コストはそのままに実装の速度・パフォーマンスは向上する可能性が高いです。(SPAではなくSSRなどを行う場合はさらに深いNuxt.jsの知識が必要となります)
今回の教材では、Amazonという馴染深いECサイトを模倣する形でカート機能や評価機能などあるある〜な機能を多数実装できる教材となっています。しかもLaravelの環境構築はDockerで構築してみます。
学べることが盛りだくさんですね。
それでは実際にどのようなサイトを作成するか確認してみましょう。

写真
GIF
URL

以上のようなサイトの作成を行います。
次の項目でより詳細な学習内容をご確認ください。

## 本教材で学べること
### 全体像
 - LaravelとNuxt.jsを連携させて今流行りのシングルページアプリケーションを実装できるようになる
 - LaravelをApiとして利用した会員登録機能、カート登録機能、メール送信機能を実装できるようになる
 - よく見かける商品のレビュー機能の実装
 - カート機能などを実装するためのデータベース設計の基本を習得できる
 - Laradockを使ったLaravel環境とMySQL&phpMyadminの構築
 ### Laravel
 - Laravelのapi利用
 - Laravelの認証機能(ログイン等)
 - Eloquant
 - コレクション
 - 各種ヘルパ関数
 - データベースマイグレーション
 - シーダー
 - Eagerローディングでの無駄なSQL発行の防止

 ### Nuxt.js
 - Axiosを使った非同期通信
 - SPA特有のリッチな画面遷移アニメーション
 - Vuexでクライアント側での状態管理
 - Nuxt.jsのVueRouterは超便利
 - ページのコンポーネント化

 ### その他
 - ○ GmailをSMTPサーバーに仕立てて購入完了メールの送信
 - ○ Mailhogを使った簡易テストメールの送信

## 受講における必要条件
 - HTML/CSSの基礎知識
 - PHPの基礎知識
 - JavaScriptの基礎構文の理解
 - コマンドの基礎知識


## この教材の対象者
 - ProgateなどでPHPとJavascriptの入門が完了し、ポートフォリオとしても見栄えの良いWebアプリケーションを作りたい方
 - 需要が高まりつつあるSPAサイトをLaravelとNuxt.js(Vue.jsをさらに使いやすくしたフレームワーク)を使って実装したい方


## 学ばないこと
 - 本教材ではLaravelとNuxt.jsの基礎知識を中心として学習します。
 - 以下の情報についての説明はありません。
 - HTML/CSS/Sass/bootstrap
 - Nuxt.jsのSPAモード以外の機能（SSRなどは行いません）

## 本教材で質問対応可能なOSや環境
 Mac OS
 Docker環境のためWindowsでも問題なく動くかと思われますが、教材とは関係のない部分でのエラーの質問が多いため
質問対応はMac OSに限らせていただきます。

## 執筆者について
 どういった人が教材を作っているのか？というのが気になる方もいらっしゃると思いますので少しだけ紹介させてください。関西で受託開発および自社サービスの開発を行う企業の代表をしており、同時に他社の社員研修講師、時にはプログラミングスクールや就労移行支援施設で講師として活動しております。
そのため「現場の開発者としての視点」と、「教育者としての視点」の二つを持つ珍しいタイプのエンジニアであるため
「初心者が躓くポイント」「教科書的ではなく実務的なポイント」などを意識した血の通った教材を作成したつもりです。

また私が初心者だった頃に、難しいことを堅苦しく書いた教材に泣かされてきましたので、コード以外は砕けた表現を使うようにし、なるべく例え話も入れるようにしました。時々滑っているかもしれませんがそこらへんでのクレームなどは入れないようご容赦頂ければと思います。

## 目次

### 0章 はじめに
 - 0-1 Amazon風！SPAの簡易ショッピングサイトを作ってみよう！
 - 0-2 テキストエディターの導入
 - 0-3 Homebrewの導入
 - 0-4 php7.4のインストール
 - 0-5 Composerのインストール

### 1章 Laravelの環境構築
 - 1-1 Dockerのダウンロード
 - 1-2 Laradockのダウンロード
 - 1-3 Laradockの設定
 - 1-4 Laravelのダウンロード

### 2章 Nuxt.jsの環境構築
 - 2-1 Node.jsのインストール
 - 2-2 Nuxt.jsのインストール
 - 2-3 LaravelとVue.jsの連携を行う

### 3章 SPAの基本の動きを知る
 - 3-1 必要なページを作成する(デザイン面)
 - 3-2 LaravelをAPI化しよう
 - 3-3 VueRouterを使ってSPAの動きを作る
 - 3-4 SPAの要「Axios」を使う
 - 3-5 SPAの動きで画面遷移

### 4章 商品データベースの準備(Laravel)
 - 4-1 DB設計を考える
 - 4-2 マイグレーションファイルで必要なテーブル構成を準備する
 - 4-3 シーダーで必要な商品情報を準備する
 - 4-3 実際にテーブルを作成する

### 5章 ログイン・会員登録を実装
 - 5-1 Laravel側でログイン機能の実装
 - 5-2 Laravel側で会員登録の実装
 - 5-3 ログイン機能をSPA化
 - 5-4 会員登録をSPA化

### 6章 商品一覧画面を実装する
 - 6-1 SPAでのルーティングを行う
 - 6-1 商品情報を取得するためのモデル
 - 6-3 Vue.js上でAxiosを利用してLaravelのEloquantで商品一覧の情報を取得する
 - 6-4 商品一覧情報をLaravelのペジネーションとVue.jsを組み合わせて表示
 - 6-5 画像を表示させる
 - 6-6「カートに追加する」機能を実装

### 7章 カート機能の実装
 - 7-1 cartsテーブルの役割
 - 7-2 カートに追加された際の動きを実装
 - 7-3 コントローラに書くか、モデルに書くか
 - 7-4 カートページへのルーティング
 - 7-5 カートページをログイン時のみ閲覧可能とする
 - 7-6 カート内に合計金額と購入ボタンを表示する

### 8章 購入時のメール送信機能を実装
 - 8-1 購入時の流れを考える
 - 8-2 Gmailをsmtpにしてメール送信をする準備
 - 8-3 Mailhogを準備する（Gmailが出来ない場合）
 - 8-4 購入完了画面の実装
 - 8-5 購入完了メールの準備と送信

### 9章 商品のレビュー投稿機能を実装
 - 9-1 レビュー投稿の流れを考える
 - 9-2 レビュー投稿のためのデータベース設計
 - 9-3 レビュー投稿のためのマイグレーション
 - 9-4 レビュー投稿画面の実装
 - 9-5 レビューの表示

### トラブルシューティング
- 1 Laravelでよく発生するエラーを知ろう
- 2 Nuxt.js(Vue.js）でよく発生するエラーを知ろう
- 3 エラーが発生してしまったら